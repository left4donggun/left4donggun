<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="/js/jquery-1.12.4.min.js"></script>
</head>
<body>
    <div class="slider" id="instafeed">
    </div>
    <script>
        /* 구글애널리틱스 */
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-GCFTW2SRM2');

        $(function(){

            /* 인스타게시물 */
            let instagramAccessToken = "IGQWROaTc2ZAmI5QUxUS1BXZATVXWmt4eU1LbzVSZAG5RdXlQc1pTVk11RGk0VE93WWo0dzg1TEtLb2dCVEp1bDBMblNIOVNxOU9QSzVMZAmNHU2s3R19fbk5qdWFEOXFTclN3dWxUYjkzODZApZAwZDZD";
            $.ajax({
                type: "GET",
                url: "https://graph.instagram.com/me/media",
                data:{
                    fields:"permalink,media_url,caption,media_type,thumbnail_url"
                    ,limit:8
                    ,access_token:instagramAccessToken
                },
                success: function(result) {
                    $("#instafeed").html("");
                    for(let i=0;i<result.data.length;i++){
                        let mediaUrl =  result.data[i].media_url;
                        if(result.data[i].media_type == 'VIDEO')mediaUrl = result.data[i].thumbnail_url;

                        let li ='';
                        li += "    <div class=\"item\">";
                        li += "        <div class=\"inr\">";
                        li += "            <a href=\"" + result.data[i].permalink + "\" target=\"_blank\" title=\"새창\">\n";
                        li += "                <span class='img'><img alt='' src='"+(mediaUrl)+"'/></span>";
                        li += "                <span class='tit'>"+result.data[i].caption+"</span>";
                        li += "            </a>";
                        li += "        </div>";
                        li += "    </div>";
                        $("#instafeed").append(li);
                    }
                }
                , error: function(data, status, err) {
                    console.log('instagram','err',data, status, err);
                }
            });
        });
    </script>
</body>
</html>
